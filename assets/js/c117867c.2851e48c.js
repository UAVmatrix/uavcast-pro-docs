"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[3407],{4877:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>a,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"configuration/flight_controller/index","title":"Flight Controller","description":"Flight Controller","source":"@site/docs/configuration/flight_controller/index.md","sourceDirName":"configuration/flight_controller","slug":"/configuration-flight-controller","permalink":"/docs/6.x/configuration-flight-controller","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/configuration/flight_controller/index.md","tags":[],"version":"current","frontMatter":{"slug":"/configuration-flight-controller","title":"Flight Controller","authors":"Bernt Christian Egeland","tags":[]},"sidebar":"tutorialSidebar","previous":{"title":"Dynamic DNS","permalink":"/docs/6.x/configuration-dynamic-dns"},"next":{"title":"Ground Control Stations","permalink":"/docs/6.x/configuration-ground-controller"}}');var l=i(4848),s=i(8453);const t={slug:"/configuration-flight-controller",title:"Flight Controller",authors:"Bernt Christian Egeland",tags:[]},o="Flight Controller",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Connection Method",id:"connection-method",level:2},{value:"USB Connection (Recommended)",id:"usb-connection-recommended",level:3},{value:"Serial/GPIO Connection",id:"serialgpio-connection",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Baud Rate",id:"baud-rate",level:3},{value:"Internal Telemetry Address",id:"internal-telemetry-address",level:3},{value:"Enable Flight Controller",id:"enable-flight-controller",level:3},{value:"Connection Status",id:"connection-status",level:2},{value:"What is Monitored:",id:"what-is-monitored",level:3},{value:"Service Controls",id:"service-controls",level:2},{value:"Start/Stop Service",id:"startstop-service",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"No Connection / Red Status",id:"no-connection--red-status",level:3},{value:"MAVLink Protocol Versions",id:"mavlink-protocol-versions",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Pages",id:"related-pages",level:2},{value:"Next Steps",id:"next-steps",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"flight-controller",children:"Flight Controller"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"Flight Controller",src:i(7797).A+"",width:"1024",height:"544"})}),"\n",(0,l.jsx)(n.p,{children:"The Flight Controller page allows you to configure the MAVLink connection between your Raspberry Pi and flight controller. UAVcast-Pro supports any MAVLink-compatible flight controller including Pixhawk, APM, Cube, and other ArduPilot or PX4-based systems."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["UAVcast-Pro uses ",(0,l.jsx)(n.code,{children:"mavlink-routerd"})," to manage MAVLink telemetry routing. This allows you to:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Connect your flight controller via USB or Serial"}),"\n",(0,l.jsx)(n.li,{children:"Route telemetry to multiple ground control stations"}),"\n",(0,l.jsx)(n.li,{children:"Monitor connection health in real-time"}),"\n",(0,l.jsx)(n.li,{children:"Configure baud rates and communication parameters"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"connection-method",children:"Connection Method"}),"\n",(0,l.jsx)(n.p,{children:"Choose how your flight controller connects to the Raspberry Pi:"}),"\n",(0,l.jsx)(n.h3,{id:"usb-connection-recommended",children:"USB Connection (Recommended)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Plug-and-play, auto-detected"}),"\n",(0,l.jsx)(n.li,{children:"More reliable connection"}),"\n",(0,l.jsx)(n.li,{children:"No GPIO pin configuration needed"}),"\n",(0,l.jsx)(n.li,{children:"Supports hot-plugging"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Device Detection:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Most flight controllers appear as ",(0,l.jsx)(n.code,{children:"/dev/ttyACM0"})]}),"\n",(0,l.jsxs)(n.li,{children:["Some may use ",(0,l.jsx)(n.code,{children:"/dev/ttyUSB0"})]}),"\n",(0,l.jsx)(n.li,{children:"UAVcast-Pro auto-detects the correct device"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{title:"Best Practice",type:"tip",children:(0,l.jsx)(n.p,{children:"USB is the recommended connection method for most setups. It's more reliable and easier to configure than Serial/GPIO."})}),"\n",(0,l.jsx)(n.h3,{id:"serialgpio-connection",children:"Serial/GPIO Connection"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Saves USB ports"}),"\n",(0,l.jsx)(n.li,{children:"More compact physical setup"}),"\n",(0,l.jsx)(n.li,{children:"Direct hardware connection"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Connect flight controller TELEM port to Raspberry Pi GPIO:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"TX (Flight Controller) \u2192 RX (GPIO 15, Pin 10)"}),"\n",(0,l.jsx)(n.li,{children:"RX (Flight Controller) \u2192 TX (GPIO 14, Pin 8)"}),"\n",(0,l.jsx)(n.li,{children:"GND \u2192 GND (Pin 6 or any ground pin)"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Enable serial port in Raspberry Pi configuration"}),"\n",(0,l.jsx)(n.li,{children:"Disable serial console (if enabled)"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Device Path:"})," ",(0,l.jsx)(n.code,{children:"/dev/ttyAMA0"})," (or ",(0,l.jsx)(n.code,{children:"/dev/serial0"})," on some models)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,l.jsx)(n.h3,{id:"baud-rate",children:"Baud Rate"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default value:"})," ",(0,l.jsx)(n.code,{children:"57600"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Common options:"})," ",(0,l.jsx)(n.code,{children:"9600"}),", ",(0,l.jsx)(n.code,{children:"57600"}),", ",(0,l.jsx)(n.code,{children:"115200"}),", ",(0,l.jsx)(n.code,{children:"230400"}),", ",(0,l.jsx)(n.code,{children:"460800"}),", ",(0,l.jsx)(n.code,{children:"921600"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Select the baud rate that matches your flight controller's telemetry port configuration."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Common baud rates by flight controller:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Pixhawk/Cube (ArduPilot):"})," 57600 or 115200"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Pixhawk (PX4):"})," 57600"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"APM:"})," 57600"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Modern flight controllers:"})," Can support up to 921600"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{title:"Performance",type:"tip",children:(0,l.jsx)(n.p,{children:"Higher baud rates (115200+) allow faster telemetry updates but require quality cables. Start with 57600 for reliability."})}),"\n",(0,l.jsx)(n.h3,{id:"internal-telemetry-address",children:"Internal Telemetry Address"}),"\n",(0,l.jsx)(n.p,{children:"This is the internal address UAVcast-Pro uses for routing telemetry."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default value:"})," ",(0,l.jsx)(n.code,{children:"127.0.0.1:14550"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Format:"})," ",(0,l.jsx)(n.code,{children:"IP:PORT"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"When to change:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Advanced routing scenarios"}),"\n",(0,l.jsx)(n.li,{children:"Custom MAVLink router configurations"}),"\n",(0,l.jsx)(n.li,{children:"Integration with other onboard services"}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{title:"Leave Default",type:"info",children:(0,l.jsx)(n.p,{children:"For most users, the default value works perfectly. Only change if you have specific routing requirements."})}),"\n",(0,l.jsx)(n.h3,{id:"enable-flight-controller",children:"Enable Flight Controller"}),"\n",(0,l.jsx)(n.p,{children:"Toggle to enable or disable the flight controller service."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Enabled:"})," MAVLink router starts and telemetry is routed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Disabled:"})," Service stopped, no telemetry routing"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"connection-status",children:"Connection Status"}),"\n",(0,l.jsx)(n.p,{children:"The page displays real-time connection status:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\ud83d\udfe2 ",(0,l.jsx)(n.strong,{children:"Connected:"})," MAVLink HEARTBEAT messages received"]}),"\n",(0,l.jsxs)(n.li,{children:["\ud83d\udd34 ",(0,l.jsx)(n.strong,{children:"Disconnected:"})," No HEARTBEAT detected"]}),"\n",(0,l.jsxs)(n.li,{children:["\ud83d\udfe1 ",(0,l.jsx)(n.strong,{children:"Connecting:"})," Service starting up"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"what-is-monitored",children:"What is Monitored:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"HEARTBEAT Messages:"})," Confirms active MAVLink communication"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Message Rate:"})," Number of messages per second"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"System ID:"})," Flight controller's MAVLink system ID"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Component ID:"})," MAVLink component identifier"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Autopilot Type:"})," Detected autopilot (ArduPilot, PX4, etc.)"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"service-controls",children:"Service Controls"}),"\n",(0,l.jsx)(n.h3,{id:"startstop-service",children:"Start/Stop Service"}),"\n",(0,l.jsx)(n.p,{children:"Control the MAVLink router service:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Start:"})," Begins telemetry routing"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Stop:"})," Halts all telemetry communication"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Restart:"})," Stops and starts the service (useful after configuration changes)"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{title:"Configuration Changes",type:"tip",children:(0,l.jsx)(n.p,{children:"After changing baud rate or connection method, restart the service for changes to take effect."})}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"no-connection--red-status",children:"No Connection / Red Status"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Problem:"})," Flight controller shows disconnected status"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check Physical Connection:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Verify USB cable is securely connected"}),"\n",(0,l.jsx)(n.li,{children:"Try a different USB port"}),"\n",(0,l.jsx)(n.li,{children:"Use a quality USB cable (cheap cables can cause issues)"}),"\n",(0,l.jsx)(n.li,{children:"For Serial: verify GPIO wiring is correct"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Verify Baud Rate:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ensure baud rate matches flight controller configuration"}),"\n",(0,l.jsxs)(n.li,{children:["Check flight controller parameters (e.g., ",(0,l.jsx)(n.code,{children:"SERIAL1_BAUD"})," in ArduPilot)"]}),"\n",(0,l.jsx)(n.li,{children:"Try common rates: 57600, 115200"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check Device Path:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["For USB, verify device appears: ",(0,l.jsx)(n.code,{children:"ls -l /dev/ttyACM*"})," or ",(0,l.jsx)(n.code,{children:"ls -l /dev/ttyUSB*"})]}),"\n",(0,l.jsxs)(n.li,{children:["For Serial: ",(0,l.jsx)(n.code,{children:"ls -l /dev/ttyAMA0"})," or ",(0,l.jsx)(n.code,{children:"/dev/serial0"})]}),"\n",(0,l.jsxs)(n.li,{children:["Check kernel messages: ",(0,l.jsx)(n.code,{children:"dmesg | grep tty"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Flight Controller Configuration:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ensure telemetry output is enabled on the port"}),"\n",(0,l.jsx)(n.li,{children:"Verify MAVLink protocol is selected (not MSP or other protocols)"}),"\n",(0,l.jsx)(n.li,{children:"Check flight controller is powered and initialized"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Service Status:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Check if mavlink-routerd is running: ",(0,l.jsx)(n.code,{children:"sudo systemctl status mavlink-manager"})]}),"\n",(0,l.jsxs)(n.li,{children:["View system logs: ",(0,l.jsx)(n.code,{children:"journalctl -u mavlink-manager -f"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"mavlink-protocol-versions",children:"MAVLink Protocol Versions"}),"\n",(0,l.jsx)(n.p,{children:"UAVcast-Pro supports:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"MAVLink v1:"})," Legacy protocol"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"MAVLink v2:"})," Modern protocol with signing and extensions"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"The router auto-detects protocol version."}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Use USB Connection"})," for simplicity and reliability"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Start with 57600 baud"})," and increase if needed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Test connection before flight"})," using the status indicator"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Monitor logs"})," if experiencing connection issues"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Keep cables short"})," (< 1 meter for USB)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Use quality cables"})," - cheap cables cause signal integrity issues"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Secure connections"})," - vibration can disconnect loose cables"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"related-pages",children:"Related Pages"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/6.x/configuration-ground-controller",children:"Ground Control Stations"})," - Configure telemetry destinations"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/6.x/configuration-dashboard",children:"Dashboard"})," - Monitor flight controller status"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/6.x/configuration-map",children:"Flight Map"})," - View live telemetry on map"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/docs/6.x/configuration-dashboard",children:"Troubleshooting Guide"})," - Common issues and solutions"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsx)(n.p,{children:"After configuring your flight controller:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Verify connection status shows \ud83d\udfe2 Connected"}),"\n",(0,l.jsxs)(n.li,{children:["Configure ",(0,l.jsx)(n.a,{href:"/docs/6.x/configuration-ground-controller",children:"Ground Control Stations"})," to route telemetry"]}),"\n",(0,l.jsxs)(n.li,{children:["Set up ",(0,l.jsx)(n.a,{href:"/docs/6.x/configuration-vpn",children:"VPN"})," for remote access"]}),"\n",(0,l.jsxs)(n.li,{children:["View live telemetry on the ",(0,l.jsx)(n.a,{href:"/docs/6.x/configuration-map",children:"Flight Map"})]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},7797:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/flightcontroller-50fa6ecc32fcaa2933697e4ec6e21ab7.jpg"},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var r=i(6540);const l={},s=r.createContext(l);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);